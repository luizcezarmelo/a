<div><br class="Apple-interchange-newline"><!DOCTYPE html><br><html lang="pt-br"><br><head><br> <meta charset="UTF-8" /><br> <meta name="viewport" content="width=device-width, initial-scale=1" /><br> <title>Agenda do Fofo</title><br> <style><br> /* Seu CSS original vem aqui - Nenhuma mudan√ßa necess√°ria */<br> * {<br> box-sizing: border-box;<br> }<br> body {<br> margin: 0;<br> font-family: Arial, sans-serif;<br> background-color: #fff;<br> color: #000;<br> }<br> .container {<br> display: flex;<br> flex-direction: column;<br> }<br> @media (min-width: 768px) {<br> .container {<br> flex-direction: row;<br> min-height: 100vh;<br> }<br> }<br> .left-panel,<br> .right-panel {<br> padding: 20px;<br> }<br> .left-panel {<br> flex: 2;<br> border-right: 1px solid #ccc;<br> }<br> .right-panel {<br> flex: 1;<br> }<br> .calendar-section {<br> margin: 20px 0;<br> display: flex;<br> align-items: center;<br> gap: 8px;<br> flex-wrap: wrap;<br> }<br> .calendar-section button {<br> padding: 5px 10px;<br> font-size: 14px;<br> cursor: pointer;<br> }<br> .day-nav {<br> display: flex;<br> gap: 8px;<br> align-items: center;<br> margin: -10px 0 10px 0;<br> }<br> .day-nav button {<br> padding: 2px 8px;<br> font-size: 16px;<br> cursor: pointer;<br> }<br> .actions {<br> display: flex;<br> gap: 10px;<br> margin-bottom: 10px;<br> flex-wrap: wrap;<br> }<br> .search-area {<br> display: flex;<br> gap: 5px;<br> margin-bottom: 10px;<br> align-items: center;<br> flex-wrap: wrap;<br> }<br> .search-area input {<br> flex: 1;<br> padding: 5px;<br> min-width: 120px;<br> }<br> .search-results {<br> background-color: #fff;<br> border: 1px solid transparent;<br> padding: 10px;<br> max-height: 150px;<br> overflow-y: auto;<br> }<br> .search-results div {<br> cursor: pointer;<br> padding: 4px;<br> }<br> .search-results div:hover {<br> background-color: #eee;<br> }<br> .destaque {<br> background: yellow;<br> }<br> .commitment {<br> display: flex;<br> align-items: center;<br> margin-bottom: 5px;<br> flex-wrap: wrap;<br> padding: 5px;<br> }<br> .commitment input[type="text"] {<br> flex: 1;<br> padding: 5px;<br> margin-right: 5px;<br> min-width: 120px;<br> }<br> .commitment button {<br> margin-left: 3px;<br> }<br> .done {<br> text-decoration: line-through;<br> color: gray;<br> }<br> #cpfStatus.valid {<br> color: blue;<br> }<br> #cpfStatus.invalid {<br> color: red;<br> }<br> .commitment.checked {<br> background-color: #d1e7ff;<br> }<br> .commitment:nth-child(even) {<br> background-color: #f2f2f2;<br> }<br> .commitment:nth-child(even).checked {<br> background-color: #aed6f1;<br> }<br> </style><br><br> <!-- Adiciona os Scripts do Firebase (vers√£o de compatibilidade, mais f√°cil de usar aqui) --><br> <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script><br> <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script><br></head><br><body><br> <!-- SEU HTML ORIGINAL VEM AQUI - NENHUMA MUDAN√áA NECESS√ÅRIA --><br> <div class="container"><br> <div class="left-panel"><br> <h1>Agenda do Fofo</h1><br> <div class="calendar-section"><br> <input type="date" id="dataSelecionada" /><br> <button id="hojeBtn" title="Hoje">üìÖ</button><br> </div><br> <div class="day-nav"><br> <button id="prevDayBtn" title="Dia anterior">‚óÄ</button><br> <button id="nextDayBtn" title="Pr√≥ximo dia">‚ñ∂</button><br> </div><br> <div class="actions"><br> <button id="novoBtn">Novo</button><br> <button id="copiarBtn">Copiar</button><br> <button id="colarBtn">Colar</button><br> <a href="https://luizcezarmelo.github.io/minha-agenda/laudosipi.html" target="_blank" style="text-decoration: none"><br> <button type="button">Laudos de IPI</button><br></a><br> </div><br> <div id="agenda"></div><br> </div><br> <div class="right-panel"><br> <h2>Validador de CPF</h2><br> <div style="display: flex; gap: 5px; flex-wrap: wrap"><br> <input type="text" id="cpf" placeholder="Digite o CPF" /><br> <button onclick="limparCPF()" title="Limpar CPF">‚ùå</button><br> </div><br> <p id="cpfStatus"></p><br> <button onclick="copiarCPF()">Copiar</button><br><br> <h3>üîç Pesquisa</h3><br> <div class="search-area"><br> <input type="text" id="search" placeholder="Pesquisar..." /><br> <button onclick="limparBusca()">‚ùå</button><br> </div><br> <div id="searchResults" class="search-results"></div><br> <h3>üìù Lembretes:</h3><br> <textarea<br> id="notasFixas"<br> rows="20"<br> style="width: 100%; resize: vertical"<br> ></textarea><br> </div><br> </div><br><br> <script><br> // ‚úÖ SUA CONFIGURA√á√ÉO DO FIREBASE J√Å EST√Å INCLU√çDA AQUI<br> const firebaseConfig = {<br> apiKey: "AIzaSyDQOGFiqafMZh0ha6XW62P1DpIKJE8TBYc",<br> authDomain: "agenda-online-7b71c.firebaseapp.com",<br> // Adicionei a databaseURL que √© necess√°ria para o Realtime Database<br> databaseURL: "https://agenda-online-7b71c-default-rtdb.firebaseio.com",<br> projectId: "agenda-online-7b71c",<br> storageBucket: "agenda-online-7b71c.appspot.com",<br> messagingSenderId: "28125733214",<br> appId: "1:28125733214:web:162d1cce5d14f55c24afcf",<br> };<br><br> // Inicializa o Firebase<br> firebase.initializeApp(firebaseConfig);<br> const database = firebase.database();<br><br> // Elementos principais e vari√°veis globais<br> const agendaEl = document.getElementById("agenda");<br> const searchEl = document.getElementById("search");<br> const searchResultsEl = document.getElementById("searchResults");<br> const dataInput = document.getElementById("dataSelecionada");<br> const novoBtn = document.getElementById("novoBtn");<br> const copiarBtn = document.getElementById("copiarBtn");<br> const colarBtn = document.getElementById("colarBtn");<br> const exportarBtn = document.getElementById("exportarBtn");<br> const hojeBtn = document.getElementById("hojeBtn");<br> const prevDayBtn = document.getElementById("prevDayBtn");<br> const nextDayBtn = document.getElementById("nextDayBtn");<br> const notasFixasEl = document.getElementById("notasFixas");<br><br> const maxCompromissos = 20;<br> let bufferCopiados = [];<br><br> /* Configura√ß√£o inicial */<br> dataInput.value = new Date().toISOString().split("T")[0];<br> window.addEventListener("load", () => {<br> carregarAgenda();<br> carregarNotasFixas(); // Carrega as notas fixas ao iniciar<br> });<br><br> /* Listeners de interface */<br> dataInput.addEventListener("change", carregarAgenda);<br> novoBtn.addEventListener("click", adicionarCompromisso);<br> copiarBtn.addEventListener("click", copiarCompromissos);<br> colarBtn.addEventListener("click", colarCompromissos);<br> // Removi exportarBtn (j√° n√£o existe) e coloquei o bot√£o Laudos de IPI com link<br> hojeBtn.addEventListener("click", () => {<br> const hoje = new Date().toISOString().split("T")[0];<br> dataInput.value = hoje;<br> carregarAgenda();<br> });<br> prevDayBtn.addEventListener("click", () => {<br> const d = new Date(dataInput.value);<br> d.setDate(d.getDate() - 1);<br> dataInput.value = d.toISOString().split("T")[0];<br> carregarAgenda();<br> });<br> nextDayBtn.addEventListener("click", () => {<br> const d = new Date(dataInput.value);<br> d.setDate(d.getDate() + 1);<br> dataInput.value = d.toISOString().split("T")[0];<br> carregarAgenda();<br> });<br> searchEl.addEventListener("input", pesquisarCompromisso);<br><br> /* Salvamento com delay */<br> let debounceTimer;<br> function salvarComDelay() {<br> clearTimeout(debounceTimer);<br> debounceTimer = setTimeout(() => salvarAgenda(), 1000); // Aumentei um pouco o delay para redes<br> }<br><br> /* Carregar agenda do dia selecionado */<br> async function carregarAgenda() {<br> const data = dataInput.value;<br> agendaEl.innerHTML = ""; // Limpa a agenda atual<br><br> const section = document.createElement("div");<br> section.className = "date-section";<br> section.dataset.data = data;<br><br> const compromissos = document.createElement("div");<br> compromissos.className = "commitments";<br><br> // Busca os dados do Firebase<br> const snapshot = await database.ref("agenda/" + data).once("value");<br> let dadosSalvos = snapshot.val() || [];<br><br> while (dadosSalvos.length < 15)<br> dadosSalvos.push({ texto: "", hora: "", tachado: false, selecionado: false });<br><br> dadosSalvos.forEach((item) => compromissos.appendChild(criarCampoCompromisso(item)));<br> section.appendChild(compromissos);<br> agendaEl.appendChild(section);<br> }<br><br> /* Salvamento da agenda */<br> function salvarAgenda() {<br> const data = dataInput.value;<br> const section = document.querySelector(".date-section");<br> if (!section) return;<br><br> const textos = [];<br> section.querySelectorAll(".commitment").forEach((div) => {<br> const input = div.querySelector('input[type="text"]');<br> const checkbox = div.querySelector('input[type=checkbox]');<br> textos.push({<br> texto: input.value,<br> hora: "", // O campo hora n√£o √© usado, mantive a estrutura<br> tachado: input.classList.contains("done"),<br> selecionado: checkbox.checked,<br> });<br> });<br> // Salva os dados no Firebase no "caminho" agenda/ANO-MES-DIA<br> database.ref("agenda/" + data).set(textos);<br> }<br><br> /* Cria um campo de compromisso (l√≥gica interna n√£o muda) */<br> function criarCampoCompromisso(item = { texto: "", hora: "", tachado: false, selecionado: false }) {<br> const div = document.createElement("div");<br> div.className = "commitment";<br><br> const checkbox = document.createElement("input");<br> checkbox.type = "checkbox";<br> checkbox.checked = item.selecionado;<br> checkbox.addEventListener("change", () => {<br> div.classList.toggle("checked", checkbox.checked);<br> salvarAgenda();<br> });<br> if (item.selecionado) {<br> div.classList.add("checked");<br> }<br><br> const input = document.createElement("input");<br> input.type = "text";<br> input.value = item.texto;<br> if (item.tachado) input.classList.add("done");<br><br> input.addEventListener("input", salvarComDelay);<br> input.addEventListener("keydown", (e) => {<br> if (e.key === "Enter") {<br> const allInputs = [...document.querySelectorAll(".commitment input[type=text]")];<br> const idx = allInputs.indexOf(input);<br> const next = allInputs[idx + 1];<br> if (next) next.focus();<br> }<br> });<br><br> const okBtn = document.createElement("button");<br> okBtn.textContent = "OK";<br> okBtn.onclick = () => {<br> input.classList.toggle("done");<br> salvarAgenda();<br> };<br><br> const delBtn = document.createElement("button");<br> delBtn.textContent = "Excluir";<br> delBtn.onclick = () => {<br> input.value = "";<br> input.classList.remove("done");<br> salvarAgenda();<br> };<br><br> div.appendChild(checkbox);<br> div.appendChild(input);<br> div.appendChild(okBtn);<br> div.appendChild(delBtn);<br> return div;<br> }<br><br> /* Adiciona um novo campo de compromisso */<br> function adicionarCompromisso() {<br> const compromissos = document.querySelector(".commitments");<br> if (compromissos.children.length < maxCompromissos) {<br> compromissos.appendChild(criarCampoCompromisso());<br> }<br> }<br><br> /* Pesquisa por compromissos no Firebase */<br> async function pesquisarCompromisso() {<br> const termo = searchEl.value.trim().toLowerCase();<br> searchResultsEl.innerHTML = "";<br> if (termo.length < 3) return;<br><br> const resultados = [];<br> // Pega todos os dados da agenda de uma vez do Firebase<br> const snapshot = await database.ref("agenda").once("value");<br> const todasAsAgendas = snapshot.val();<br><br> if (todasAsAgendas) {<br> for (const data in todasAsAgendas) {<br> const dadosDoDia = todasAsAgendas[data] || [];<br> dadosDoDia.forEach((item, index) => {<br> if (item.texto && item.texto.toLowerCase().includes(termo)) {<br> resultados.push({ data, index, item });<br> }<br> });<br> }<br> }<br><br> if (resultados.length > 0) {<br> resultados.forEach(({ data, index, item }) => {<br> const divResultado = document.createElement("div");<br> divResultado.textContent = Dia: ${data} - ${item.texto};<br> divResultado.onclick = () => {<br> dataInput.value = data;<br> carregarAgenda().then(() => {<br> // Espera carregar a agenda antes de destacar<br> const compromisso = agendaEl.querySelectorAll(".commitment")[index];<br> if (compromisso) {<br> compromisso.scrollIntoView({ behavior: "smooth", block: "center" });<br> compromisso.classList.add("destaque");<br> setTimeout(() => compromisso.classList.remove("destaque"), 2000);<br> }<br> });<br> };<br> searchResultsEl.appendChild(divResultado);<br> });<br> } else {<br> searchResultsEl.textContent = "Nenhum compromisso encontrado.";<br> }<br> }<br><br> /* Limpa busca */<br> function limparBusca() {<br> searchEl.value = "";<br> searchResultsEl.innerHTML = "";<br> }<br><br> /* Fun√ß√µes de Copiar/Colar (l√≥gica interna n√£o muda) */<br> function copiarCompromissos() {<br> bufferCopiados = [];<br> const section = document.querySelector(".date-section");<br> if (!section) return;<br><br> const compromissos = section.querySelectorAll(".commitment");<br> compromissos.forEach((div) => {<br> const input = div.querySelector('input[type="text"]');<br> if (!input.classList.contains("done")) {<br> bufferCopiados.push(input.value);<br> input.classList.add("done");<br> }<br> });<br> salvarAgenda();<br> }<br><br> function colarCompromissos() {<br> if (!bufferCopiados.length) return;<br> const compromissosDiv = document.querySelector(".commitments");<br> if (!compromissosDiv) return;<br><br> let idxBuffer = 0;<br><br> function encontrarOuAdicionarCampoVazio() {<br> const vazio = [...compromissosDiv.children].find(<br> (div) => !div.querySelector("input[type=text]").value<br> );<br> if (vazio) return vazio;<br> if (compromissosDiv.children.length < maxCompromissos) {<br> const novo = criarCampoCompromisso();<br> compromissosDiv.appendChild(novo);<br> return novo;<br> }<br> return null;<br> }<br><br> while (idxBuffer < bufferCopiados.length) {<br> const campo = encontrarOuAdicionarCampoVazio();<br> if (!campo) break;<br> const input = campo.querySelector("input[type=text]");<br> const checkbox = campo.querySelector('input[type="checkbox"]');<br> input.value = bufferCopiados[idxBuffer++];<br> input.classList.remove("done");<br> checkbox.checked = false;<br> campo.classList.remove("checked");<br> }<br> salvarAgenda();<br> }<br><br> /* Fun√ß√µes de CPF (n√£o mudam) */<br> function validarCPF(cpf) {<br> if (!cpf || cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) return false;<br> let soma = 0,<br> resto;<br> for (let i = 1; i <= 9; i++) soma += parseInt(cpf[i - 1]) * (11 - i);<br> resto = (soma * 10) % 11;<br> if (resto === 10 || resto === 11) resto = 0;<br> if (resto !== parseInt(cpf[9])) return false;<br> soma = 0;<br> for (let i = 1; i <= 10; i++) soma += parseInt(cpf[i - 1]) * (12 - i);<br> resto = (soma * 10) % 11;<br> if (resto === 10 || resto === 11) resto = 0;<br> return resto === parseInt(cpf[10]);<br> }<br><br> document.getElementById("cpf").addEventListener("input", () => {<br> const raw = document.getElementById("cpf").value.replace(/\D/g, "");<br> const status = document.getElementById("cpfStatus");<br> const valido = validarCPF(raw);<br> status.textContent = valido ? "CPF v√°lido" : "CPF inv√°lido";<br> status.className = valido ? "valid" : "invalid";<br> });<br><br> function copiarCPF() {<br> let raw = document.getElementById("cpf").value.replace(/\D/g, "");<br> if (validarCPF(raw)) {<br> let formatado = raw.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");<br> navigator.clipboard.writeText(formatado);<br> }<br> }<br><br> function limparCPF() {<br> document.getElementById("cpf").value = "";<br> document.getElementById("cpfStatus").textContent = "";<br> document.getElementById("cpfStatus").className = "";<br> }<br><br> /* Fun√ß√µes das Notas Fixas com Firebase */<br> async function carregarNotasFixas() {<br> const snapshot = await database.ref("notasFixas").once("value");<br> notasFixasEl.value = snapshot.val() || "";<br> }<br><br> notasFixasEl.addEventListener("input", () => {<br> database.ref("notasFixas").set(notasFixasEl.value);<br> });<br><br> /* Converte para mai√∫sculas */<br> document.addEventListener("input", (e) => {<br> if (e.target.matches("input[type='text'], textarea")) {<br> const pos = e.target.selectionStart;<br> e.target.value = e.target.value.toUpperCase();<br> e.target.setSelectionRange(pos, pos);<br> }<br> });<br> </script><br></body><br></html><br><br><br><br><br id="textarea-placeholder-break"></div>
