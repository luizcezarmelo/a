// Espera o documento HTML ser completamente carregado antes de executar o script
document.addEventListener('DOMContentLoaded', () => {

    const searchInput = document.getElementById('searchInput');
    const menuList = document.getElementById('menuList');
    const menuLinks = menuList.querySelectorAll('.menu-link');
    const contentSections = document.querySelectorAll('.topic-content');
    const allMenuItems = menuList.getElementsByTagName('li'); // Usado para a pesquisa

    // --- 1. FUNCIONALIDADE DE PESQUISA ---
    searchInput.addEventListener('keyup', () => {
        const filter = searchInput.value.toLowerCase().trim();
        
        // Loop por todos os itens <li> da lista do menu
        for (let i = 0; i < allMenuItems.length; i++) {
            const link = allMenuItems[i].getElementsByTagName('a')[0];
            const txtValue = link.textContent || link.innerText;

            // Condição: Mostrar se o filtro tiver menos de 3 letras
            if (filter.length < 3) {
                allMenuItems[i].style.display = ''; // Mostra o item
            } 
            // Condição: Mostrar se o texto do link corresponder ao filtro
            else if (txtValue.toLowerCase().includes(filter)) {
                allMenuItems[i].style.display = ''; // Mostra o item
            } 
            // Condição: Esconder se não corresponder
            else {
                allMenuItems[i].style.display = 'none'; // Esconde o item
            }
        }
    });

    // --- 2. FUNCIONALIDADE DE TROCA DE CONTEÚDO (TABS) ---
    menuList.addEventListener('click', (event) => {
        // Verifica se o clique foi realmente em um link do menu
        if (event.target.classList.contains('menu-link')) {
            event.preventDefault(); // Impede o link de navegar (ex: mudar a URL)

            const targetId = event.target.getAttribute('data-target');

            // 1. Remove a classe 'active' de todos os links
            menuLinks.forEach(link => {
                link.classList.remove('active');
            });

            // 2. Adiciona a classe 'active' apenas ao link clicado
            event.target.classList.add('active');

            // 3. Esconde todas as seções de conteúdo
            contentSections.forEach(section => {
                section.classList.remove('active');
            });

            // 4. Mostra apenas a seção de conteúdo correspondente ao link clicado
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }
    });

});
